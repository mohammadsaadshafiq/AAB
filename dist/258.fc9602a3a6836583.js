"use strict";(self.webpackChunkmaterial=self.webpackChunkmaterial||[]).push([[258],{6258:(et,L,r)=>{r.r(L),r.d(L,{LoginModule:()=>tt,loginRoutes:()=>U});var S=r(6019),d=r(607),f=r(1410),h=r(1848),O=r(6153),i=r(9133),F=r(7717),T=r(1382),l=(()=>{return(e=l||(l={})).LOGIN="[Auth] Login",e.LOGIN_SUCCESS="[Auth] Login Success",e.LOGIN_FAILURE="[Auth] Login Failure",e.SIGNUP="[Auth] Signup",e.SIGNUP_SUCCESS="[Auth] Signup Success",e.SIGNUP_FAILURE="[Auth] Signup Failure",e.LOGOUT="[Auth] Logout",e.GET_STATUS="[Auth] GetStatus",l;var e})();class G{constructor(n){this.payload=n,this.type=l.LOGIN}}class j{constructor(n){this.payload=n,this.type=l.LOGIN_SUCCESS}}class N{constructor(n){this.payload=n,this.type=l.LOGIN_FAILURE}}const I=e=>e.login,M=((0,d.P1)(I,e=>e.loginState),(0,d.P1)(I,e=>e.loginError));var t=r(3668),E=r(2168),v=r(515),y=r(888),x=r(8167),P=r(138),B=r(86),w=r(9112);function R(e,n){1&e&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1,"Username / Email is required"),t.\u0275\u0275elementEnd())}function A(e,n){if(1&e){const o=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-icon",11),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(o),t.\u0275\u0275nextContext().show()}),t.\u0275\u0275text(1,"visibility"),t.\u0275\u0275elementEnd()}}function b(e,n){if(1&e){const o=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-icon",11),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(o),t.\u0275\u0275nextContext().show()}),t.\u0275\u0275text(1,"visibility_off"),t.\u0275\u0275elementEnd()}}function z(e,n){1&e&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1,"Password must be minimum 6 letters and alphanumeric"),t.\u0275\u0275elementEnd())}function V(e,n){if(1&e&&(t.\u0275\u0275elementStart(0,"span"),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&e){const o=n.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(o.message)}}function J(e,n){if(1&e&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275template(1,V,2,1,"span",12),t.\u0275\u0275elementEnd()),2&e){const o=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",o.errorMessageList)}}let Y=(()=>{class e{constructor(o,a,m,s){this.formBuilder=o,this.service=a,this.router=m,this.store=s,this.passType="password",this.passTypeBool=!1,this.loginForm=this.formBuilder.group({username:["",i.kI.required],password:["",[i.kI.required,i.kI.pattern(/[a-z]/),i.kI.pattern(/[0-9]/)]]}),this.errorMessage$=this.store.pipe((0,d.Ys)(M))}ngOnInit(){this.errorMessage$.subscribe(o=>{this.errorMessageList=o.errorMessage})}submit(){!this.loginForm.valid||this.store.dispatch(new G(this.loginForm.value))}show(){"password"==this.passType?(this.passTypeBool=!0,this.passType="text"):(this.passTypeBool=!1,this.passType="password")}}return e.\u0275fac=function(o){return new(o||e)(t.\u0275\u0275directiveInject(i.qu),t.\u0275\u0275directiveInject(E.b),t.\u0275\u0275directiveInject(h.F0),t.\u0275\u0275directiveInject(d.yh))},e.\u0275cmp=t.\u0275\u0275defineComponent({type:e,selectors:[["app-login"]],decls:20,vars:7,consts:[["fxLayout","row","fxLayoutAlign","center center",1,"height-100"],["fxFlex.gt-xs","40","fxFlex.sm","70"],[1,"text-center"],[3,"formGroup","ngSubmit"],["type","text","matInput","","placeholder","Username / Email","formControlName","username"],[4,"ngIf"],[1,"left"],[3,"click",4,"ngIf"],["maxlength","40","minlength","7","matInput","","placeholder","Password","formControlName","password",3,"type"],["fxLayoutAlign","center center",1,"button",2,"margin-top","5%"],["type","submit","mat-raised-button","","color","primary"],[3,"click"],[4,"ngFor","ngForOf"]],template:function(o,a){if(1&o&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275elementStart(1,"mat-card",1),t.\u0275\u0275elementStart(2,"mat-card-title",2),t.\u0275\u0275text(3,"Login"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"mat-card-content"),t.\u0275\u0275elementStart(5,"form",3),t.\u0275\u0275listener("ngSubmit",function(){return a.submit()}),t.\u0275\u0275elementStart(6,"p"),t.\u0275\u0275elementStart(7,"mat-form-field"),t.\u0275\u0275element(8,"input",4),t.\u0275\u0275template(9,R,2,0,"mat-error",5),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(10,"div",6),t.\u0275\u0275template(11,A,2,0,"mat-icon",7),t.\u0275\u0275template(12,b,2,0,"mat-icon",7),t.\u0275\u0275elementStart(13,"mat-form-field"),t.\u0275\u0275element(14,"input",8),t.\u0275\u0275template(15,z,2,0,"mat-error",5),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(16,J,2,1,"mat-error",5),t.\u0275\u0275elementStart(17,"div",9),t.\u0275\u0275elementStart(18,"button",10),t.\u0275\u0275text(19,"Login"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&o){let m,s;t.\u0275\u0275advance(5),t.\u0275\u0275property("formGroup",a.loginForm),t.\u0275\u0275advance(4),t.\u0275\u0275property("ngIf",null==(m=a.loginForm.get("username"))?null:m.invalid),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",a.passTypeBool),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!a.passTypeBool),t.\u0275\u0275advance(2),t.\u0275\u0275propertyInterpolate("type",a.passType),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==(s=a.loginForm.get("password"))?null:s.invalid),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",a.errorMessageList.length)}},directives:[v.xw,v.Wh,y.a8,v.yH,y.n5,y.dn,i._Y,i.JL,i.sg,x.KE,P.Nt,i.Fj,i.JJ,i.u,S.O5,i.nD,i.wO,B.lW,x.TO,w.Hw,S.sg],styles:[".height-100[_ngcontent-%COMP%]{height:100vh}.left[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;align-items:center}"]}),e})();const $={User:null},D={errorMessage:[]},H=(0,d.UY)({loginState:(e=$,n)=>n.type===l.LOGIN_SUCCESS?Object.assign(Object.assign({},e),{User:{token:n.payload.token,id:n.payload.id,email:n.payload.email}}):e,loginError:(e=D,n)=>n.type===l.LOGIN_FAILURE?Object.assign(Object.assign({},e),{errorMessage:n.payload}):e});function K(e,n){return H(e,n)}var C=r(8053),Q=r(9204),W=r(2047),X=r(2411),Z=r(9966),k=r(8502),_=r(3572);class c{constructor(n,o,a,m,s,g){this._snackBar=n,this.actions=o,this.authService=a,this.router=m,this.service=s,this._service=g,this.LogIn=this.actions.pipe((0,f.l4)(l.LOGIN),(0,C.U)(p=>p),(0,Q.w)(p=>this.authService.httpPost("portalauth","login",p.payload).pipe((0,C.U)(u=>(this.router.navigate(["admin-list"]),this._snackBar.open("Login Successful","",{duration:2500}),localStorage.setItem("_context",u.data.token),localStorage.setItem("currentId",u.data.user._id),this._service.setUserLoggedIn(!0),new j({token:u.data.token,email:u.data.user.email,id:u.data.user.id}))),(0,W.K)(u=>(this._snackBar.open("Invalid Username / Password Combination","",{duration:1e3}),(0,X.of)(new N(u.error.errors)))))))}}c.\u0275fac=function(n){return new(n||c)(t.\u0275\u0275inject(Z.ux),t.\u0275\u0275inject(f.eX),t.\u0275\u0275inject(k.T),t.\u0275\u0275inject(h.F0),t.\u0275\u0275inject(E.b),t.\u0275\u0275inject(_.r))},c.\u0275prov=t.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac}),function(e,n,o,a){var g,m=arguments.length,s=m<3?n:null===a?a=Object.getOwnPropertyDescriptor(n,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,n,o,a);else for(var p=e.length-1;p>=0;p--)(g=e[p])&&(s=(m<3?g(s):m>3?g(n,o,s):g(n,o))||s);m>3&&s&&Object.defineProperty(n,o,s)}([(0,f.Qm)()],c.prototype,"LogIn",void 0);const U=[{path:"",component:Y}];let tt=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=t.\u0275\u0275defineInjector({imports:[[S.ez,F.O,i.u5,i.UX,O.o9,T.m,h.Bz,h.Bz.forChild(U),d.Aw.forFeature("login",K),f.sQ.forFeature([c])]]}),e})()}}]);