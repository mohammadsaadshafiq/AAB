"use strict";(self.webpackChunkmaterial=self.webpackChunkmaterial||[]).push([[258],{6258:(nt,L,o)=>{o.r(L),o.d(L,{LoginModule:()=>et,loginRoutes:()=>U});var S=o(6019),u=o(607),f=o(1410),h=o(1848),O=o(6153),c=o(9133),F=o(7717),T=o(1382),s=(()=>{return(e=s||(s={})).LOGIN="[Auth] Login",e.LOGIN_SUCCESS="[Auth] Login Success",e.LOGIN_FAILURE="[Auth] Login Failure",e.SIGNUP="[Auth] Signup",e.SIGNUP_SUCCESS="[Auth] Signup Success",e.SIGNUP_FAILURE="[Auth] Signup Failure",e.LOGOUT="[Auth] Logout",e.GET_STATUS="[Auth] GetStatus",s;var e})();class G{constructor(n){this.payload=n,this.type=s.LOGIN}}class j{constructor(n){this.payload=n,this.type=s.LOGIN_SUCCESS}}class N{constructor(n){this.payload=n,this.type=s.LOGIN_FAILURE}}const I=e=>e.login,M=((0,u.P1)(I,e=>e.loginState),(0,u.P1)(I,e=>e.loginError));var t=o(3668),E=o(2168),v=o(515),y=o(888),C=o(8167),P=o(138),w=o(86),B=o(9112),R=o(7444);function A(e,n){1&e&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1,"Username / Email is required"),t.\u0275\u0275elementEnd())}function V(e,n){if(1&e){const r=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-icon",12),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(r),t.\u0275\u0275nextContext().show()}),t.\u0275\u0275text(1,"visibility"),t.\u0275\u0275elementEnd()}}function b(e,n){if(1&e){const r=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-icon",13),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(r),t.\u0275\u0275nextContext().show()}),t.\u0275\u0275text(1,"visibility_off"),t.\u0275\u0275elementEnd()}}function z(e,n){1&e&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1,"Password is required"),t.\u0275\u0275elementEnd())}function J(e,n){if(1&e&&(t.\u0275\u0275elementStart(0,"span"),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&e){const r=n.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(r.message)}}function Y(e,n){if(1&e&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275template(1,J,2,1,"span",14),t.\u0275\u0275elementEnd()),2&e){const r=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",r.errorMessageList)}}let $=(()=>{class e{constructor(r,a,l,i){this.formBuilder=r,this.service=a,this.router=l,this.store=i,this.passType="password",this.passTypeBool=!1,this.loginForm=this.formBuilder.group({username:["",c.kI.required],password:["",c.kI.required]}),this.errorMessage$=this.store.pipe((0,u.Ys)(M))}ngOnInit(){this.errorMessage$.subscribe(r=>{this.errorMessageList=r.errorMessage})}submit(){!this.loginForm.valid||this.store.dispatch(new G(this.loginForm.value))}show(){"password"==this.passType?(this.passTypeBool=!0,this.passType="text"):(this.passTypeBool=!1,this.passType="password")}}return e.\u0275fac=function(r){return new(r||e)(t.\u0275\u0275directiveInject(c.qu),t.\u0275\u0275directiveInject(E.b),t.\u0275\u0275directiveInject(h.F0),t.\u0275\u0275directiveInject(u.yh))},e.\u0275cmp=t.\u0275\u0275defineComponent({type:e,selectors:[["app-login"]],decls:20,vars:7,consts:[["fxLayout","row","fxLayoutAlign","center center",1,"height-100"],["fxFlex.gt-xs","40","fxFlex.sm","70"],[1,"text-center"],[3,"formGroup","ngSubmit"],["type","text","matInput","","placeholder","Username / Email","formControlName","username"],[4,"ngIf"],[1,"left"],["matTooltip","show hide password",3,"click",4,"ngIf"],[3,"click",4,"ngIf"],["matInput","","placeholder","Password","formControlName","password",3,"type"],["fxLayoutAlign","center center",1,"button"],["type","submit","mat-raised-button","","color","primary"],["matTooltip","show hide password",3,"click"],[3,"click"],[4,"ngFor","ngForOf"]],template:function(r,a){if(1&r&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275elementStart(1,"mat-card",1),t.\u0275\u0275elementStart(2,"mat-card-title",2),t.\u0275\u0275text(3,"Login"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"mat-card-content"),t.\u0275\u0275elementStart(5,"form",3),t.\u0275\u0275listener("ngSubmit",function(){return a.submit()}),t.\u0275\u0275elementStart(6,"p"),t.\u0275\u0275elementStart(7,"mat-form-field"),t.\u0275\u0275element(8,"input",4),t.\u0275\u0275template(9,A,2,0,"mat-error",5),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(10,"div",6),t.\u0275\u0275template(11,V,2,0,"mat-icon",7),t.\u0275\u0275template(12,b,2,0,"mat-icon",8),t.\u0275\u0275elementStart(13,"mat-form-field"),t.\u0275\u0275element(14,"input",9),t.\u0275\u0275template(15,z,2,0,"mat-error",5),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(16,Y,2,1,"mat-error",5),t.\u0275\u0275elementStart(17,"div",10),t.\u0275\u0275elementStart(18,"button",11),t.\u0275\u0275text(19,"Login"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&r){let l,i;t.\u0275\u0275advance(5),t.\u0275\u0275property("formGroup",a.loginForm),t.\u0275\u0275advance(4),t.\u0275\u0275property("ngIf",null==(l=a.loginForm.get("username"))?null:l.invalid),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",a.passTypeBool),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!a.passTypeBool),t.\u0275\u0275advance(2),t.\u0275\u0275propertyInterpolate("type",a.passType),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==(i=a.loginForm.get("password"))?null:i.invalid),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",a.errorMessageList.length)}},directives:[v.xw,v.Wh,y.a8,v.yH,y.n5,y.dn,c._Y,c.JL,c.sg,C.KE,P.Nt,c.Fj,c.JJ,c.u,S.O5,w.lW,C.TO,B.Hw,R.gM,S.sg],styles:[".height-100[_ngcontent-%COMP%]{height:100vh}.left[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;align-items:center}"]}),e})();const H={User:null},K={errorMessage:[]},Q=(0,u.UY)({loginState:(e=H,n)=>n.type===s.LOGIN_SUCCESS?Object.assign(Object.assign({},e),{User:{token:n.payload.token,id:n.payload.id,email:n.payload.email}}):e,loginError:(e=K,n)=>n.type===s.LOGIN_FAILURE?Object.assign(Object.assign({},e),{errorMessage:n.payload}):e});function W(e,n){return Q(e,n)}var x=o(8053),X=o(9204),D=o(2047),Z=o(2411),k=o(9966),q=o(8502),_=o(3572);class m{constructor(n,r,a,l,i,g){this._snackBar=n,this.actions=r,this.authService=a,this.router=l,this.service=i,this._service=g,this.LogIn=this.actions.pipe((0,f.l4)(s.LOGIN),(0,x.U)(p=>p),(0,X.w)(p=>this.authService.httpPost("portalauth","login",p.payload).pipe((0,x.U)(d=>(this.router.navigate(["admin-list"]),this._snackBar.open("Login Successful","",{duration:2500}),localStorage.setItem("_context",d.data.token),localStorage.setItem("currentId",d.data.user._id),this._service.setUserLoggedIn(!0),new j({token:d.data.token,email:d.data.user.email,id:d.data.user.id}))),(0,D.K)(d=>(this._snackBar.open("Invalid Username / Password Combination","",{duration:1e3}),(0,Z.of)(new N(d.error.errors)))))))}}m.\u0275fac=function(n){return new(n||m)(t.\u0275\u0275inject(k.ux),t.\u0275\u0275inject(f.eX),t.\u0275\u0275inject(q.T),t.\u0275\u0275inject(h.F0),t.\u0275\u0275inject(E.b),t.\u0275\u0275inject(_.r))},m.\u0275prov=t.\u0275\u0275defineInjectable({token:m,factory:m.\u0275fac}),function(e,n,r,a){var g,l=arguments.length,i=l<3?n:null===a?a=Object.getOwnPropertyDescriptor(n,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,n,r,a);else for(var p=e.length-1;p>=0;p--)(g=e[p])&&(i=(l<3?g(i):l>3?g(n,r,i):g(n,r))||i);l>3&&i&&Object.defineProperty(n,r,i)}([(0,f.Qm)()],m.prototype,"LogIn",void 0);const U=[{path:"",component:$}];let et=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=t.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=t.\u0275\u0275defineInjector({imports:[[S.ez,F.O,c.u5,c.UX,O.o9,T.m,h.Bz,h.Bz.forChild(U),u.Aw.forFeature("login",W),f.sQ.forFeature([m])]]}),e})()}}]);