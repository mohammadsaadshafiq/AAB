"use strict";(self.webpackChunkmaterial=self.webpackChunkmaterial||[]).push([[258],{6258:(H,v,e)=>{e.r(v),e.d(v,{LoginModule:()=>D,loginRoutes:()=>Z});var p=e(6019),m=e(607),d=e(1410),f=e(1848),O=e(6153),g=e(9133),G=e(6426),T=e(1382),a=(()=>{return(o=a||(a={})).LOGIN="[Auth] Login",o.LOGIN_SUCCESS="[Auth] Login Success",o.LOGIN_FAILURE="[Auth] Login Failure",o.SIGNUP="[Auth] Signup",o.SIGNUP_SUCCESS="[Auth] Signup Success",o.SIGNUP_FAILURE="[Auth] Signup Failure",o.LOGOUT="[Auth] Logout",o.GET_STATUS="[Auth] GetStatus",a;var o})();class C{constructor(r){this.payload=r,this.type=a.LOGIN}}class A{constructor(r){this.payload=r,this.type=a.LOGIN_SUCCESS}}class N{constructor(r){this.payload=r,this.type=a.LOGIN_FAILURE}}const I=o=>o.login,x=((0,m.P1)(I,o=>o.loginState),(0,m.P1)(I,o=>o.loginError));var t=e(3668),U=e(2168),h=e(515),L=e(888),y=e(8167),E=e(138),M=e(86);function P(o,r){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Username is required"),t.qZA())}function Y(o,r){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Password is required"),t.qZA())}function R(o,r){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const n=r.$implicit;t.xp6(1),t.Oqu(n.message)}}function J(o,r){if(1&o&&(t.TgZ(0,"mat-error"),t.YNc(1,R,2,1,"span",9),t.qZA()),2&o){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.errorMessageList)}}let j=(()=>{class o{constructor(n,i,l,s){this.formBuilder=n,this.service=i,this.router=l,this.store=s,this.loginForm=this.formBuilder.group({username:["",g.kI.required],password:["",g.kI.required]}),this.errorMessage$=this.store.pipe((0,m.Ys)(x))}ngOnInit(){this.errorMessage$.subscribe(n=>{this.errorMessageList=n.errorMessage})}submit(){!this.loginForm.valid||this.store.dispatch(new C(this.loginForm.value))}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(g.qu),t.Y36(U.b),t.Y36(f.F0),t.Y36(m.yh))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-login"]],decls:18,vars:4,consts:[["fxLayout","row","fxLayoutAlign","center center",1,"height-100"],["fxFlex.gt-xs","40","fxFlex.sm","70"],[1,"text-center"],[3,"formGroup","ngSubmit"],["type","text","matInput","","placeholder","Username","formControlName","username"],[4,"ngIf"],["type","password","matInput","","placeholder","Password","formControlName","password"],["fxLayoutAlign","center center",1,"button"],["type","submit","mat-raised-button","","color","primary"],[4,"ngFor","ngForOf"]],template:function(n,i){if(1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"mat-card",1),t.TgZ(2,"mat-card-title",2),t._uU(3,"Login"),t.qZA(),t.TgZ(4,"mat-card-content"),t.TgZ(5,"form",3),t.NdJ("ngSubmit",function(){return i.submit()}),t.TgZ(6,"p"),t.TgZ(7,"mat-form-field"),t._UZ(8,"input",4),t.YNc(9,P,2,0,"mat-error",5),t.qZA(),t.qZA(),t.TgZ(10,"p"),t.TgZ(11,"mat-form-field"),t._UZ(12,"input",6),t.YNc(13,Y,2,0,"mat-error",5),t.qZA(),t.qZA(),t.YNc(14,J,2,1,"mat-error",5),t.TgZ(15,"div",7),t.TgZ(16,"button",8),t._uU(17,"Login"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&n){let l,s;t.xp6(5),t.Q6J("formGroup",i.loginForm),t.xp6(4),t.Q6J("ngIf",null==(l=i.loginForm.get("username"))?null:l.invalid),t.xp6(4),t.Q6J("ngIf",null==(s=i.loginForm.get("password"))?null:s.invalid),t.xp6(1),t.Q6J("ngIf",i.errorMessageList.length)}},directives:[h.xw,h.Wh,L.a8,h.yH,L.n5,L.dn,g._Y,g.JL,g.sg,y.KE,E.Nt,g.Fj,g.JJ,g.u,p.O5,M.lW,y.TO,p.sg],styles:[".height-100[_ngcontent-%COMP%]{height:100vh}"]}),o})();const Q={User:null},B={errorMessage:[]},z=(0,m.UY)({loginState:(o=Q,r)=>r.type===a.LOGIN_SUCCESS?Object.assign(Object.assign({},o),{User:{token:r.payload.token,id:r.payload.id,email:r.payload.email}}):o,loginError:(o=B,r)=>r.type===a.LOGIN_FAILURE?Object.assign(Object.assign({},o),{errorMessage:r.payload}):o});function X(o,r){return z(o,r)}var F=e(8053),$=e(9204),b=e(2047),w=e(2411),K=e(8502);class c{constructor(r,n,i,l){this.actions=r,this.authService=n,this.router=i,this.service=l,this.LogIn=this.actions.pipe((0,d.l4)(a.LOGIN),(0,F.U)(s=>s),(0,$.w)(s=>this.authService.httpPost("portalauth","login",s.payload).pipe((0,F.U)(u=>(this.router.navigate(["admin-list"]),localStorage.setItem("_context",u.data.token),localStorage.setItem("currentId",u.data.user._id),new A({token:u.data.token,email:u.data.user.email,id:u.data.user.id}))),(0,b.K)(u=>(0,w.of)(new N(u.error.errors))))))}}c.\u0275fac=function(r){return new(r||c)(t.LFG(d.eX),t.LFG(K.T),t.LFG(f.F0),t.LFG(U.b))},c.\u0275prov=t.Yz7({token:c,factory:c.\u0275fac}),function(o,r,n,i){var u,l=arguments.length,s=l<3?r:null===i?i=Object.getOwnPropertyDescriptor(r,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(o,r,n,i);else for(var S=o.length-1;S>=0;S--)(u=o[S])&&(s=(l<3?u(s):l>3?u(r,n,s):u(r,n))||s);l>3&&s&&Object.defineProperty(r,n,s)}([(0,d.Qm)()],c.prototype,"LogIn",void 0);const Z=[{path:"",component:j}];let D=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[p.ez,G.O,g.u5,g.UX,O.o9,T.m,f.Bz,f.Bz.forChild(Z),m.Aw.forFeature("login",X),d.sQ.forFeature([c])]]}),o})()}}]);