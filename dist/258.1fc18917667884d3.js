"use strict";(self.webpackChunkmaterial=self.webpackChunkmaterial||[]).push([[258],{6258:(tt,y,r)=>{r.r(y),r.d(y,{LoginModule:()=>_,loginRoutes:()=>O});var S=r(6019),g=r(607),f=r(1410),h=r(1848),F=r(6153),c=r(9133),x=r(7717),G=r(1382),i=(()=>{return(e=i||(i={})).LOGIN="[Auth] Login",e.LOGIN_SUCCESS="[Auth] Login Success",e.LOGIN_FAILURE="[Auth] Login Failure",e.SIGNUP="[Auth] Signup",e.SIGNUP_SUCCESS="[Auth] Signup Success",e.SIGNUP_FAILURE="[Auth] Signup Failure",e.LOGOUT="[Auth] Logout",e.GET_STATUS="[Auth] GetStatus",i;var e})();class j{constructor(n){this.payload=n,this.type=i.LOGIN}}class N{constructor(n){this.payload=n,this.type=i.LOGIN_SUCCESS}}class T{constructor(n){this.payload=n,this.type=i.LOGIN_FAILURE}}const I=e=>e.login,M=((0,g.P1)(I,e=>e.loginState),(0,g.P1)(I,e=>e.loginError));var t=r(3668),E=r(2168),v=r(515),L=r(888),U=r(8167),P=r(138),R=r(9112),A=r(7444),B=r(86);function w(e,n){1&e&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1,"Username is required"),t.\u0275\u0275elementEnd())}function z(e,n){1&e&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1,"Password is required"),t.\u0275\u0275elementEnd())}function J(e,n){if(1&e&&(t.\u0275\u0275elementStart(0,"span"),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&e){const o=n.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(o.message)}}function Y(e,n){if(1&e&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275template(1,J,2,1,"span",11),t.\u0275\u0275elementEnd()),2&e){const o=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",o.errorMessageList)}}let $=(()=>{class e{constructor(o,a,l,s){this.formBuilder=o,this.service=a,this.router=l,this.store=s,this.passType="password",this.loginForm=this.formBuilder.group({username:["",c.kI.required],password:["",c.kI.required]}),this.errorMessage$=this.store.pipe((0,g.Ys)(M))}ngOnInit(){this.errorMessage$.subscribe(o=>{this.errorMessageList=o.errorMessage})}submit(){!this.loginForm.valid||this.store.dispatch(new j(this.loginForm.value))}show(){this.passType="password"==this.passType?"text":"password"}}return e.\u0275fac=function(o){return new(o||e)(t.\u0275\u0275directiveInject(c.qu),t.\u0275\u0275directiveInject(E.b),t.\u0275\u0275directiveInject(h.F0),t.\u0275\u0275directiveInject(g.yh))},e.\u0275cmp=t.\u0275\u0275defineComponent({type:e,selectors:[["app-login"]],decls:20,vars:5,consts:[["fxLayout","row","fxLayoutAlign","center center",1,"height-100"],["fxFlex.gt-xs","40","fxFlex.sm","70"],[1,"text-center"],[3,"formGroup","ngSubmit"],["type","text","matInput","","placeholder","Username","formControlName","username"],[4,"ngIf"],[1,"left"],["matTooltip","show hide password",3,"click"],["matInput","","placeholder","Password","formControlName","password",3,"type"],["fxLayoutAlign","center center",1,"button"],["type","submit","mat-raised-button","","color","primary"],[4,"ngFor","ngForOf"]],template:function(o,a){if(1&o&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275elementStart(1,"mat-card",1),t.\u0275\u0275elementStart(2,"mat-card-title",2),t.\u0275\u0275text(3,"Login"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"mat-card-content"),t.\u0275\u0275elementStart(5,"form",3),t.\u0275\u0275listener("ngSubmit",function(){return a.submit()}),t.\u0275\u0275elementStart(6,"p"),t.\u0275\u0275elementStart(7,"mat-form-field"),t.\u0275\u0275element(8,"input",4),t.\u0275\u0275template(9,w,2,0,"mat-error",5),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(10,"div",6),t.\u0275\u0275elementStart(11,"mat-icon",7),t.\u0275\u0275listener("click",function(){return a.show()}),t.\u0275\u0275text(12,"visibility"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(13,"mat-form-field"),t.\u0275\u0275element(14,"input",8),t.\u0275\u0275template(15,z,2,0,"mat-error",5),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(16,Y,2,1,"mat-error",5),t.\u0275\u0275elementStart(17,"div",9),t.\u0275\u0275elementStart(18,"button",10),t.\u0275\u0275text(19,"Login"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&o){let l,s;t.\u0275\u0275advance(5),t.\u0275\u0275property("formGroup",a.loginForm),t.\u0275\u0275advance(4),t.\u0275\u0275property("ngIf",null==(l=a.loginForm.get("username"))?null:l.invalid),t.\u0275\u0275advance(5),t.\u0275\u0275propertyInterpolate("type",a.passType),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==(s=a.loginForm.get("password"))?null:s.invalid),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",a.errorMessageList.length)}},directives:[v.xw,v.Wh,L.a8,v.yH,L.n5,L.dn,c._Y,c.JL,c.sg,U.KE,P.Nt,c.Fj,c.JJ,c.u,S.O5,R.Hw,A.gM,B.lW,U.TO,S.sg],styles:[".height-100[_ngcontent-%COMP%]{height:100vh}.left[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;align-items:center}"]}),e})();const H={User:null},K={errorMessage:[]},Q=(0,g.UY)({loginState:(e=H,n)=>n.type===i.LOGIN_SUCCESS?Object.assign(Object.assign({},e),{User:{token:n.payload.token,id:n.payload.id,email:n.payload.email}}):e,loginError:(e=K,n)=>n.type===i.LOGIN_FAILURE?Object.assign(Object.assign({},e),{errorMessage:n.payload}):e});function W(e,n){return Q(e,n)}var C=r(8053),X=r(9204),b=r(2047),D=r(2411),V=r(9966),Z=r(8502),k=r(3572);class m{constructor(n,o,a,l,s,p){this._snackBar=n,this.actions=o,this.authService=a,this.router=l,this.service=s,this._service=p,this.LogIn=this.actions.pipe((0,f.l4)(i.LOGIN),(0,C.U)(d=>d),(0,X.w)(d=>this.authService.httpPost("portalauth","login",d.payload).pipe((0,C.U)(u=>(this.router.navigate(["admin-list"]),this._snackBar.open("Login Successful","",{duration:1e3}),localStorage.setItem("_context",u.data.token),localStorage.setItem("currentId",u.data.user._id),this._service.setUserLoggedIn(!0),new N({token:u.data.token,email:u.data.user.email,id:u.data.user.id}))),(0,b.K)(u=>(this._snackBar.open("Login Unsuccessful","",{duration:1e3}),(0,D.of)(new T(u.error.errors)))))))}}m.\u0275fac=function(n){return new(n||m)(t.\u0275\u0275inject(V.ux),t.\u0275\u0275inject(f.eX),t.\u0275\u0275inject(Z.T),t.\u0275\u0275inject(h.F0),t.\u0275\u0275inject(E.b),t.\u0275\u0275inject(k.r))},m.\u0275prov=t.\u0275\u0275defineInjectable({token:m,factory:m.\u0275fac}),function(e,n,o,a){var p,l=arguments.length,s=l<3?n:null===a?a=Object.getOwnPropertyDescriptor(n,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,n,o,a);else for(var d=e.length-1;d>=0;d--)(p=e[d])&&(s=(l<3?p(s):l>3?p(n,o,s):p(n,o))||s);l>3&&s&&Object.defineProperty(n,o,s)}([(0,f.Qm)()],m.prototype,"LogIn",void 0);const O=[{path:"",component:$}];let _=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=t.\u0275\u0275defineInjector({imports:[[S.ez,x.O,c.u5,c.UX,F.o9,G.m,h.Bz,h.Bz.forChild(O),g.Aw.forFeature("login",W),f.sQ.forFeature([m])]]}),e})()}}]);